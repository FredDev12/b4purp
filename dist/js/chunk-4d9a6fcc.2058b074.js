(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d9a6fcc"],{4601:function(e,t,l){"use strict";l.r(t);var n=l("7a23");const c={class:"dashboard"},o={class:"dashboard-container"},a={class:"user-profile"},r={key:0,class:"user-profile"},i={key:0},s=["onClick"],b=["onClick"],d={key:1,class:"user-profile"},u=["onClick"],m=["onClick"],O={key:2,class:"user-profile"},j=["onClick"],k=["onClick"];function E(e,t,l,E,p,N){const g=Object(n["resolveComponent"])("NavBar");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createVNode"])(g,{menuItems:e.filteredMenuItems},null,8,["menuItems"]),Object(n["createElementVNode"])("main",o,[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("h1",null,"Bienvenue sur le tableau de bord, "+Object(n["toDisplayString"])(e.username)+" ("+Object(n["toDisplayString"])(e.role)+") !",1)]),Object(n["createElementVNode"])("section",a,[t[1]||(t[1]=Object(n["createElementVNode"])("h2",null,"Profil Utilisateur",-1)),Object(n["createElementVNode"])("table",null,[t[0]||(t[0]=Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",null,"Nom"),Object(n["createElementVNode"])("th",null,"Rôle"),Object(n["createElementVNode"])("th",null,"Contract"),Object(n["createElementVNode"])("th",null,"Description")],-1)),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.userActif,t=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.userId},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.name),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.role),1),Object(n["createElementVNode"])("td",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.contracts,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.name||"Pas de contrat"),1)]))),128))]),Object(n["createElementVNode"])("td",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.contracts,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.description||"Pas de description"),1)]))),128))])]))),128))])]),"Client"!==e.role?(Object(n["openBlock"])(),Object(n["createElementBlock"])("section",r,[t[4]||(t[4]=Object(n["createElementVNode"])("h2",null,"Clients",-1)),Object(n["createElementVNode"])("table",null,[Object(n["createElementVNode"])("tr",null,[t[2]||(t[2]=Object(n["createElementVNode"])("th",null,"Nom",-1)),t[3]||(t[3]=Object(n["createElementVNode"])("th",null,"Contrat",-1)),"Manager"!==e.role&&"Utilisateur"!==e.role?(Object(n["openBlock"])(),Object(n["createElementBlock"])("th",i,"Actions")):Object(n["createCommentVNode"])("",!0)]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.clientList,t=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.name),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.contracts,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:e.id},Object(n["toDisplayString"])(e.name||"Pas de contrat"),1))),128))])]),Object(n["createElementVNode"])("td",null,["Manager"!==e.role&&"Utilisateur"!==e.role?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,onClick:l=>e.editEntity(t),class:"edit-button"},"Éditer",8,s)):Object(n["createCommentVNode"])("",!0),"Manager"!==e.role&&"Utilisateur"!==e.role?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:1,onClick:l=>e.deleteEntity(t.id),class:"delete-button"},"Supprimer",8,b)):Object(n["createCommentVNode"])("",!0)])]))),128))])])):Object(n["createCommentVNode"])("",!0),"Manager"!==e.role?(Object(n["openBlock"])(),Object(n["createElementBlock"])("section",d,[t[6]||(t[6]=Object(n["createElementVNode"])("h2",null,"Managers",-1)),Object(n["createElementVNode"])("table",null,[t[5]||(t[5]=Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",null,"Nom"),Object(n["createElementVNode"])("th",null,"Contrat")],-1)),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.managerList,t=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.name),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.contracts,t=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:t.id},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.name||"Pas de contrat")+" ",1),Object(n["createElementVNode"])("button",{onClick:l=>e.editContract(t),class:"edit-button"},"Éditer",8,u),Object(n["createElementVNode"])("button",{onClick:l=>e.deleteContract(t.id),class:"delete-button"},"Supprimer",8,m)]))),128))])])]))),128))])])):Object(n["createCommentVNode"])("",!0),"Utilisateur"!==e.role?(Object(n["openBlock"])(),Object(n["createElementBlock"])("section",O,[t[8]||(t[8]=Object(n["createElementVNode"])("h2",null,"Utilisateurs",-1)),Object(n["createElementVNode"])("table",null,[t[7]||(t[7]=Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",null,"Nom"),Object(n["createElementVNode"])("th",null,"Manager"),Object(n["createElementVNode"])("th",null,"Contrat"),Object(n["createElementVNode"])("th",null,"Tache"),Object(n["createElementVNode"])("th",null,"Status"),Object(n["createElementVNode"])("th",null,"Actions")],-1)),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.userList,t=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.name),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.allUsers.find(e=>e.id===t.managerId)?e.allUsers.find(e=>e.id===t.managerId).name:"Manager Inconnu"),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.contracts,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:e.id},Object(n["toDisplayString"])(e.name||"Pas de contrat"),1))),128))])]),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.task||"Pas de tache"),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.status),1),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{onClick:l=>e.editEntity(t),class:"edit-button"},"Éditer",8,j),Object(n["createElementVNode"])("button",{onClick:l=>e.deleteEntity(t.id),class:"delete-button"},"Supprimer",8,k)])]))),128))])])):Object(n["createCommentVNode"])("",!0)])])}var p=l("e4c3"),N=l("8c07"),g=l("d000"),V=l("6605"),v=l("dfd5"),B=Object(n["defineComponent"])({name:"Dashboard",components:{ButtonComponent:p["a"],SidebarComponent:N["a"],NavBar:g["a"]},data(){return{filteredMenuItems:[],username:"Invité",role:"User"}},setup(){const e=Object(V["c"])(),t=Object(n["ref"])(localStorage.getItem("name")||"Invité"),l=Object(n["ref"])(localStorage.getItem("role")||"User"),c=Object(n["ref"])([]),o=Object(n["ref"])(""),a=Object(n["ref"])(localStorage.getItem("id")||"1"),r=Object(n["ref"])([]),i=Object(n["ref"])([]),s=Object(n["ref"])([]),b=Object(n["ref"])([]),d=Object(n["ref"])([]),u=Object(n["ref"])([{name:"Tableau de Bord",link:"/dashboard",active:!1,visibleTo:["Admin","Client","Manager","Utilisateur"]},{name:"Liste des Utilisateurs",link:"/liste",active:!1,visibleTo:["Admin","Client","Manager"]},{name:"Mon Profil",link:"/profile",active:!0,visibleTo:["Admin","Client","Manager","Utilisateur"]}]),m=u.value.filter(e=>e.visibleTo.includes(l.value));Object(n["onMounted"])(async()=>{try{let e;const t=l.value;switch(t){case"Admin":o.value="Admin";break;case"Client":o.value="Client";break;case"Manager":o.value="Manager";break;case"Utilisateur":o.value="Utilisateur";break;default:return void console.warn("Type d'entité inconnu: "+t)}console.log(o.value),e=await Object(v["c"])({role:o.value,id:a.value}),i.value=[],r.value=[],s.value=[],d.value=e;const n=Number(a.value);for(const l of e)if(console.log(n),console.log(l.id),l.role!==o.value||l.id!==Number(a.value))switch(l.role){case"Client":r.value.push(l);break;case"Manager":l.clientId===Number(a.value)&&i.value.push(l);break;case"Utilisateur":l.managerId!==Number(a.value)&&l.clientId!==Number(a.value)||s.value.push(l);break}else b.value.push(l),console.log("actif ",b.value);console.log("response ",s.value),console.log("role ",r.value),console.log("res ",e)}catch(e){console.error("Une erreur est survenue lors de la récupération des données.",e)}});const O=e=>{console.log("Edit entity:",e)},j=e=>{console.log("Delete entity with ID:",e)},k=e=>{console.log("Editing client:",e)},E=e=>{console.log("Editing client:",e)},p=()=>{localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("token"),e.push({name:"Login"})};return{username:t,role:l,menuItems:u,filteredMenuItems:m,userActif:b,entities:c,entityTitle:o,editEntity:O,userId:a,allUsers:d,deleteEntity:j,editContract:k,deleteContract:E,logout:p,clientList:r,managerList:i,userList:s}}}),f=l("6b0d"),y=l.n(f);const C=y()(B,[["render",E]]);t["default"]=C},"8c07":function(e,t,l){"use strict";var n=l("7a23");const c={class:"sidebar"},o=["href"];function a(e,t,l,a,r,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("aside",c,[Object(n["createElementVNode"])("nav",null,[Object(n["createElementVNode"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.menuItems,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:e.name,class:Object(n["normalizeClass"])({active:e.active})},[Object(n["createElementVNode"])("a",{href:e.link},Object(n["toDisplayString"])(e.name),9,o)],2))),128))])])])}var r=Object(n["defineComponent"])({name:"SidebarComponent",props:{menuItems:{type:Array,required:!0}}}),i=(l("9261"),l("6b0d")),s=l.n(i);const b=s()(r,[["render",a],["__scopeId","data-v-74b7da77"]]);t["a"]=b},9261:function(e,t,l){"use strict";l("d558")},d000:function(e,t,l){"use strict";var n=l("7a23");const c={class:"navbar"};function o(e,t,l,o,a,r){const i=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("header",c,[t[1]||(t[1]=Object(n["createElementVNode"])("div",{class:"logo"},[Object(n["createElementVNode"])("a",{href:"/"},"MonLogo")],-1)),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["menu",{active:e.isMenuOpen}])},[Object(n["createElementVNode"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.menuItems,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:e.name,class:Object(n["normalizeClass"])({active:e.active})},[Object(n["createVNode"])(i,{class:"link",to:e.link},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]),_:2},1032,["to"])],2))),128))])],2),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["menu",{active:e.isMenuOpen}])},[Object(n["createElementVNode"])("ul",null,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("a",{href:"#",onClick:t[0]||(t[0]=Object(n["withModifiers"])((...t)=>e.logout&&e.logout(...t),["prevent"]))},"Déconnexion")])])],2)])])}var a=l("6605"),r=Object(n["defineComponent"])({name:"NavbarComponent",props:{menuItems:{type:Array,required:!0}},setup(){const e=Object(a["c"])(),t=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("role"),e.push("/")};return{logout:t}},data(){return{isMenuOpen:!1}},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen}}}),i=l("6b0d"),s=l.n(i);const b=s()(r,[["render",o]]);t["a"]=b},d558:function(e,t,l){}}]);
//# sourceMappingURL=chunk-4d9a6fcc.2058b074.js.map