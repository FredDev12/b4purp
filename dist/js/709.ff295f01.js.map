{"version":3,"file":"js/709.ff295f01.js","mappings":"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","sources":["webpack://frontend/./src/components/NavBar.vue","webpack://frontend/./src/components/NavBar.vue?01fd","webpack://frontend/./src/components/SidebarComponent.vue","webpack://frontend/./src/components/SidebarComponent.vue?df95","webpack://frontend/./src/views/liste.vue","webpack://frontend/./src/views/liste.vue?979d","webpack://frontend/./src/store/Storage.js"],"sourcesContent":["<template>\r\n    <div>\r\n      <!-- Navbar (Header) -->\r\n      <header class=\"navbar\">\r\n        <!-- Logo -->\r\n        <div class=\"logo\">\r\n          <a href=\"/\">MonLogo</a>\r\n        </div>\r\n  \r\n        <!-- Menu -->\r\n        <div class=\"menu\" :class=\"{'active': isMenuOpen}\">\r\n          <ul>\r\n            <li v-for=\"item in menuItems\" :key=\"item.name\" :class=\"{ active: item.active }\">                \r\n                <router-link class=\"link\" :to=\"item.link\">{{ item.name }}</router-link>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <!-- Dropdown Action Bubble -->\r\n        <div class=\"action-bubble\">\r\n           <h1 class=\"welcom\" >Bonjour, {{ username }} !</h1>\r\n        \r\n          <button @click=\"toggleDropdown\" class=\"action-button\">\r\n            <img src=\"../assets/user1.png\" alt=\"Profile\" class=\"profile-picture\" />\r\n          </button>\r\n          <div v-if=\"isDropdownOpen\" class=\"dropdown-menu\">\r\n            <ul>\r\n              <li><a href=\"#\" @click.prevent=\"profil\">Mon profil</a></li>\r\n              <li><a href=\"#\" @click.prevent=\"logout\">Se d√©connecter</a></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n  \r\n      </header>\r\n      \r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n   import { defineComponent, PropType } from 'vue';\r\n   import { useRouter } from 'vue-router';\r\n   import { useStore } from '../store/Storage';\r\n\r\n  export default defineComponent ({\r\n    name: 'NavbarComponent',\r\n    props: {\r\n        menuItems: {\r\n        type: Array,\r\n        required: true,\r\n      },\r\n    },\r\n    setup() {\r\n      const router = useRouter();\r\n      const store = useStore();\r\n      const username = store.userProfile ? store.userProfile.name : 'Default Name';\r\n\r\n      const logout = () => {\r\n        // Suppression du token JWT du stockage local\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem(\"username\");\r\n        localStorage.removeItem(\"role\");\r\n        // Redirection vers la page de connexion\r\n        router.push('/');\r\n      };\r\n      const profil = () => {        \r\n        router.push({ name: 'profile' });\r\n      };\r\n\r\n      return {\r\n        logout,profil,username\r\n      };\r\n    },\r\n    data() {\r\n      return {\r\n        isMenuOpen: false,\r\n        isDropdownOpen: false,\r\n      };\r\n    },\r\n    methods: {\r\n      toggleMenu() {\r\n        this.isMenuOpen = !this.isMenuOpen;\r\n      },\r\n      toggleDropdown() {\r\n      this.isDropdownOpen = !this.isDropdownOpen;\r\n      },\r\n    }\r\n  });\r\n  </script>\r\n  \r\n\r\n  ","import { render } from \"./NavBar.vue?vue&type=template&id=13e4c432\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <aside class=\"sidebar\">\r\n      <nav>\r\n        <ul>\r\n          <li v-for=\"item in menuItems\" :key=\"item.name\" :class=\"{ active: item.active }\">\r\n            <a :href=\"item.link\">{{ item.name }}</a>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </aside>\r\n  </template>\r\n  \r\n  <script>\r\n  import { defineComponent, PropType } from 'vue';\r\n  \r\n  export default defineComponent({\r\n    name: 'SidebarComponent',\r\n    props: {\r\n      menuItems: {\r\n        type: Array,\r\n        required: true,\r\n      },\r\n    },\r\n  });\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .sidebar {\r\n    width: 20%;\r\n    background-color: #28a745;\r\n    padding: 20px;\r\n  }\r\n  \r\n  .sidebar ul {\r\n    list-style: none;\r\n    padding: 0;\r\n  }\r\n  \r\n  .sidebar ul li {\r\n    margin: 15px 0;\r\n  }\r\n  \r\n  .sidebar ul li a {\r\n    color: #fff;\r\n    text-decoration: none;\r\n  }\r\n  \r\n  .sidebar ul li.active a {\r\n    font-weight: bold;\r\n  }\r\n  </style>\r\n  ","import { render } from \"./SidebarComponent.vue?vue&type=template&id=8ce43eac&scoped=true\"\nimport script from \"./SidebarComponent.vue?vue&type=script&lang=js\"\nexport * from \"./SidebarComponent.vue?vue&type=script&lang=js\"\n\nimport \"./SidebarComponent.vue?vue&type=style&index=0&id=8ce43eac&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8ce43eac\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"dashboard\">\r\n      <!-- Barre lat√©rale -->\r\n      <NavBar :menuItems=\"filteredMenuItems\" />\r\n  \r\n      <!-- Contenu principal -->\r\n      <main class=\"table-container\">\r\n        <h1>Liste des Utilisateurs</h1>\r\n        <button class=\"add-button\" @click=\"addUser()\">Ajouter</button>\r\n        <table v-if=\"entities.length > 0\" class=\"client-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Nom complet</th>\r\n              <th>Email</th>\r\n              <th>Tache</th>\r\n              <th>Status</th>\r\n              <th>R√¥le</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"entity in entities\" :key=\"entity.id\">\r\n              <td>{{ entity.name }}</td>\r\n              <td>{{ entity.email }}</td>\r\n              <td>{{ entity.task }}</td>\r\n              <td>{{ entity.status }}</td>\r\n              <td>{{ entity.role }}</td>\r\n              <td>\r\n                <button @click=\"editEntity(entity.id)\" class=\"edit-button\">√âditer</button>\r\n                <button @click=\"deleteEntity(entity.id)\"  class=\"delete-button\">Supprimer</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <p v-else>Aucun {{ entityTitle.toLowerCase() }} trouv√© <router-link to=\"/addUser\">Ajouter ici</router-link>.</p>\r\n      </main>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import { defineComponent, ref, onMounted } from 'vue';\r\n  import ButtonComponent from '../components/ButtonComponent.vue';\r\n  import SidebarComponent from '../components/SidebarComponent.vue';\r\n  import NavBar from '../components/NavBar.vue';\r\n  import { useRouter } from 'vue-router';\r\n  import { getUsers } from '../api/serviceAPI';\r\n  import { useStore } from '../store/Storage';\r\n  \r\n  export default defineComponent({\r\n    name: \"List\",\r\n    components: {\r\n      ButtonComponent,\r\n      SidebarComponent,\r\n      NavBar\r\n    },    \r\n    setup() {\r\n      \r\n      const store = useStore();\r\n      const entities = ref([]);\r\n      const entityTitle = ref(\"\");\r\n      const role = localStorage.getItem('role') || \"Utilisateur\";  \r\n      const token = localStorage.getItem('token');\r\n      \r\n\r\n  \r\n      // D√©finir les menus sp√©cifiques √† chaque r√¥le\r\n      const menuItems = ref([\r\n          { name: 'Tableau de Bord', link: '/dashboard', active: false, visibleTo: ['Admin', 'Client', 'Manager', 'Utilisateur'] },\r\n          { name: 'Liste des Utilisateurs', link: '/liste', active: false, visibleTo: ['Admin', 'Client', 'Manager'] },\r\n          { name: 'Liste des contract', link: '/contract', active: true, visibleTo: ['Admin', 'Client'] },\r\n      ]);\r\n\r\n      // Filtrer les √©l√©ments du menu en fonction du r√¥le de l'utilisateur\r\n      const filteredMenuItems = menuItems.value.filter(item => item.visibleTo.includes(role));\r\n\r\n  \r\n      const router = useRouter();\r\n  \r\n      onMounted(async () => {\r\n        try {\r\n          let response;\r\n          const entityType = role;\r\n          switch (entityType) {\r\n              case \"Admin\":\r\n              entityTitle.value = \"Admin\";\r\n              break;\r\n              case \"Client\":\r\n              entityTitle.value = \"Client\";\r\n              break;\r\n              case \"Manager\":\r\n              entityTitle.value = \"Manager\";\r\n              break;\r\n              case \"Utilisateur\":\r\n              entityTitle.value = \"Utilisateur\";\r\n              break;\r\n              default:\r\n              console.warn(`Type d'entit√© inconnu: ${entityType}`);\r\n              return;\r\n          }\r\n          console.log(entityTitle.value);\r\n\r\n          // Only call listUsers once, since it is used in every case\r\n          if (token) {                   \r\n          \r\n          const response = await getUsers(role, token);\r\n          console.log(role);\r\n          \r\n          entities.value = response;\r\n          \r\n          \r\n        } else {\r\n          console.error(\"authentication token is missing\");\r\n          \r\n        }\r\n          \r\n      } catch (error) {\r\n          console.error(\"Une erreur est survenue lors de la r√©cup√©ration des donn√©es.\", error);\r\n      }\r\n      });\r\n  \r\n      const editEntity = (entityId) => {\r\n        console.log(\"Edit entity:\", entityId);\r\n      };\r\n  \r\n      const deleteEntity = (entityId) => {\r\n        console.log(\"Delete entity with ID:\", entityId);\r\n      };\r\n  \r\n      const addUser = () => {\r\n        router.push(\"/addUser\");\r\n      };\r\n  \r\n      return {\r\n        entities,\r\n        entityTitle,\r\n        menuItems,\r\n        editEntity,\r\n        deleteEntity,\r\n        addUser,\r\n        filteredMenuItems,\r\n        role\r\n      };\r\n    },\r\n  });\r\n  </script>\r\n  ","import { render } from \"./liste.vue?vue&type=template&id=fd09318a\"\nimport script from \"./liste.vue?vue&type=script&lang=js\"\nexport * from \"./liste.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// src/store/authStore.ts\r\nimport { defineStore } from 'pinia';\r\nimport { login, register, getUserProfile, logoutUser, listUsers, getUsers, getContract } from '../api/serviceAPI';\r\n\r\n\r\nexport const useStore = defineStore({\r\n  id: 'auth',\r\n  state: () => ({\r\n    token: localStorage.getItem('token') || null,\r\n    userProfile: null,\r\n    users: [],\r\n    userList:[],\r\n    listContract: [],\r\n    listClients: [],\r\n    listManagers: [],\r\n    listUtilisateurs: [],\r\n    isAuthenticated: !!localStorage.getItem('token'),\r\n  }),\r\n  actions: {\r\n    async performLogin(email, password) {\r\n      try {\r\n        const response = await login(email, password);\r\n        const token = response.token\r\n        const role = response.role\r\n        const userId = response.id\r\n        this.token = token;\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('role', role);\r\n        localStorage.setItem('id', userId);\r\n        this.isAuthenticated = true;\r\n        // Fetch user profile upon successful login\r\n        await this.fetchUserProfile(token);\r\n        await this.fetchUsers(role ,token);\r\n        await this.fetchContract(role, token);\r\n      } catch (error) {\r\n        console.error('Authentication failed:', error);\r\n        throw new Error('Login failed');\r\n      }\r\n    },\r\n\r\n    async fetchUserProfile(token) {\r\n      if (!token) {\r\n        console.error('No token provided');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await getUserProfile(token);\r\n        this.userProfile = response;\r\n        this.isAuthenticated = true;\r\n      } catch (error) {\r\n        console.error('Failed to fetch user profile:', error);\r\n        this.isAuthenticated = false;\r\n      }\r\n    },\r\n\r\n    async fetchUsers(role, token){\r\n      if (!token) {\r\n        console.error('No token provided');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await listUsers(role, token);\r\n        console.log('storage', response);\r\n        \r\n        this.users = response;\r\n\r\n        console.log(this.users);\r\n        \r\n        this.isAuthenticated = true;\r\n      } catch (error) {\r\n        console.error('Failed to fetch user:', error);\r\n        this.isAuthenticated = false;\r\n      }\r\n\r\n    },\r\n\r\n    async fetchUsersBY(role, token){\r\n      if (!token) {\r\n        console.error('No token provided');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await getUsers(role, token);\r\n        console.log('storage', response);\r\n        \r\n        this.userList = response;\r\n\r\n        console.log('liste ',this.userList);\r\n        \r\n        //this.isAuthenticated = true;\r\n      } catch (error) {\r\n        console.error('Failed to fetch user:', error);\r\n        this.isAuthenticated = false;\r\n      }\r\n\r\n    },\r\n\r\n    async fetchContract(role, token){\r\n      if (!token) {\r\n        console.error('No token provided');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await getContract(role, token);\r\n        console.log('storage', response);\r\n        \r\n        this.listContract = response;\r\n\r\n        console.log('liste ',this.listContract);\r\n        \r\n        //this.isAuthenticated = true;\r\n      } catch (error) {\r\n        console.error('Failed to fetch user:', error);\r\n        this.isAuthenticated = false;\r\n      }\r\n\r\n    },\r\n    \r\n    async performLogout() {\r\n      if (!this.token) {\r\n        console.error('No token provided');\r\n        return;\r\n      }\r\n      try {\r\n        await logoutUser(this.token);\r\n        this.isAuthenticated = false;\r\n        this.userProfile = null;\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"role\");\r\n        localStorage.removeItem(\"id\");\r\n      } catch (error) {\r\n        console.error('Failed to logout:', error);\r\n      }\r\n    },\r\n\r\n    async addUser(payload){\r\n\r\n    },\r\n\r\n    async fetchUsersByRole(role) {\r\n      if (!this.token) {\r\n        console.error('No token provided');\r\n        return;\r\n      }\r\n      try {\r\n        const users = await listUsers( role, this.token);\r\n        if (role === 'client') {\r\n          this.listClients = users;\r\n        } else if (role === 'manager') {\r\n          this.listManagers = users;\r\n        } else {\r\n          this.listUtilisateurs = users;\r\n        }\r\n      } catch (error) {\r\n        console.error(`Failed to fetch ${role}s:`, error);\r\n      }\r\n    }\r\n  },\r\n});\r\n"],"names":["class","href","isMenuOpen","menuItems","item","key","name","active","to","link","username","toggleDropdown","src","alt","isDropdownOpen","profil","logout","props","type","Array","required","setup","router","store","userProfile","localStorage","removeItem","push","data","methods","toggleMenu","this","__exports__","render","filteredMenuItems","addUser","entities","length","entity","id","email","task","status","role","editEntity","deleteEntity","entityTitle","toLowerCase","components","ButtonComponent","SidebarComponent","NavBar","getItem","token","visibleTo","value","filter","includes","async","entityType","console","warn","log","response","error","entityId","useStore","state","users","userList","listContract","listClients","listManagers","listUtilisateurs","isAuthenticated","actions","performLogin","password","userId","setItem","fetchUserProfile","fetchUsers","fetchContract","Error","fetchUsersBY","performLogout","payload","fetchUsersByRole"],"sourceRoot":""}