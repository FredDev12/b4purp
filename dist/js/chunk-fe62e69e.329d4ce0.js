(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe62e69e"],{"50d5":function(e,t,o){e.exports=o.p+"img/wadoria.673e5e7d.png"},5326:function(e,t,o){"use strict";o.r(t);var r=o("7a23"),a=o("50d5"),n=o.n(a);const l={class:"login-container"},c={class:"form-group"},s={key:0,class:"error"};function d(e,t,o,a,d,i){const u=Object(r["resolveComponent"])("InputField"),m=Object(r["resolveComponent"])("ButtonComponent"),p=Object(r["resolveComponent"])("router-link");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",l,[t[7]||(t[7]=Object(r["createElementVNode"])("img",{src:n.a,alt:"Logo",class:"logo"},null,-1)),t[8]||(t[8]=Object(r["createElementVNode"])("h1",null,"Connexion",-1)),Object(r["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=Object(r["withModifiers"])((...t)=>e.handleLogin&&e.handleLogin(...t),["prevent"]))},[Object(r["createElementVNode"])("div",c,[Object(r["createVNode"])(u,{type:"email",id:"email",modelValue:e.form.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t),label:"Email","error-message":e.emailError,placeholder:"Entrez votre email",required:""},null,8,["modelValue","error-message"]),Object(r["createVNode"])(u,{type:"password",id:"password",modelValue:e.form.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.password=t),label:"Mot de passe","error-message":e.passwordError,placeholder:"Entrez votre mot de passe",required:""},null,8,["modelValue","error-message"])]),Object(r["createVNode"])(m,{type:"submit",class:"btn-primary",disabled:e.loading},{default:Object(r["withCtx"])(()=>[e.loading?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createTextVNode"])("Chargement...")],64)):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Object(r["createTextVNode"])("Se connecter")],64))]),_:1},8,["disabled"]),e.apiError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",s,Object(r["toDisplayString"])(e.apiError),1)):Object(r["createCommentVNode"])("",!0)],32),Object(r["createElementVNode"])("p",null,[Object(r["createVNode"])(p,{to:"/requestPasswordReset"},{default:Object(r["withCtx"])(()=>t[3]||(t[3]=[Object(r["createTextVNode"])("Mot de passe oublié ?")])),_:1})]),Object(r["createElementVNode"])("p",null,[t[5]||(t[5]=Object(r["createTextVNode"])(" Vous n'avez pas de compte ? ")),Object(r["createVNode"])(p,{to:"/register"},{default:Object(r["withCtx"])(()=>t[4]||(t[4]=[Object(r["createTextVNode"])("Inscrivez-vous ici")])),_:1}),t[6]||(t[6]=Object(r["createTextVNode"])(". "))])])}var i=o("6605"),u=o("dfd5"),m=o("e4c3"),p=o("8192"),b=Object(r["defineComponent"])({name:"Login",components:{ButtonComponent:m["a"],InputField:p["a"]},setup(){const e=Object(i["d"])(),t=Object(r["reactive"])({email:"",password:""}),o=Object(r["ref"])(""),a=Object(r["ref"])(""),n=Object(r["ref"])(""),l=Object(r["ref"])(!1),c=async()=>{if(l.value=!0,o.value="",a.value="",n.value="",!s(t.email))return o.value="Veuillez entrer une adresse email valide.",void(l.value=!1);if(t.password.length<6)return a.value="Le mot de passe doit contenir au moins 6 caractères.",void(l.value=!1);try{const o=await Object(u["g"])(t);console.log("valide ",o.message),o.token&&(localStorage.setItem("token",o.token),localStorage.setItem("username",o.userInfo.username),console.log("login",o.userInfo),"admin"===o.userInfo.role?e.push({path:"/dashboardAdmin",query:{username:o.userInfo.username}}):"client"===o.userInfo.role?e.push("/dashboardClient"):"manager"===o.userInfo.role?e.push("/dashboardManager"):"user"===o.userInfo[0]?e.push("/dashboardUser"):(n.value="Role non reconnu.",console.log("Role non reconnu.")))}catch(r){console.error(r),console.log(t),n.value=r.message}finally{l.value=!1}},s=e=>{const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return t.test(e)};return{form:t,emailError:o,passwordError:a,apiError:n,handleLogin:c,loading:l}}}),g=o("6b0d"),j=o.n(g);const O=j()(b,[["render",d]]);t["default"]=O},8192:function(e,t,o){"use strict";var r=o("7a23");const a={class:"input-field"},n=["for"],l=["id","type","value","placeholder","disabled","maxlength","minlength"],c={key:1,class:"error-message"};function s(e,t,o,s,d,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",a,[e.label?(Object(r["openBlock"])(),Object(r["createElementBlock"])("label",{key:0,for:e.id,class:"input-label"},Object(r["toDisplayString"])(e.label),9,n)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("input",{id:e.id,type:e.type,value:e.modelValue,placeholder:e.placeholder,disabled:e.disabled,maxlength:e.maxlength,minlength:e.minlength,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),class:"input"},null,40,l),e.errorMessage?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",c,Object(r["toDisplayString"])(e.errorMessage),1)):Object(r["createCommentVNode"])("",!0)])}var d=Object(r["defineComponent"])({name:"InputField",props:{id:{type:String,required:!0},label:{type:String,required:!0},type:{type:String,default:"text"},modelValue:{type:String,required:!0},placeholder:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1},maxlength:{type:Number,required:!1},minlength:{type:Number,required:!1},errorMessage:{type:String,required:!1}}}),i=(o("be8d"),o("6b0d")),u=o.n(i);const m=u()(d,[["render",s],["__scopeId","data-v-424e3b7f"]]);t["a"]=m},be8d:function(e,t,o){"use strict";o("d2e2")},d2e2:function(e,t,o){}}]);
//# sourceMappingURL=chunk-fe62e69e.329d4ce0.js.map