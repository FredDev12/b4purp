"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[356],{639:(e,t,o)=>{o.d(t,{A:()=>u});var l=o(641);const n={class:"image-upload-container"};function r(e,t,o,r,s,i){return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("input",{type:"file",onChange:t[0]||(t[0]=(...t)=>e.handleFileUpload&&e.handleFileUpload(...t)),accept:".png, .jpg, .jpeg, .csv",class:"file-input"},null,32)])}const s=(0,l.pM)({name:"ImageUpload",emits:["update:file"],setup(e,{emit:t}){const o=e=>{const o=e.target,l=o.files,n=l&&l[0];n&&t("update:file",n)};return{handleFileUpload:o}}});var i=o(262);const a=(0,i.A)(s,[["render",r],["__scopeId","data-v-0c012dc8"]]),u=a},189:(e,t,o)=>{o.d(t,{A:()=>m});var l=o(641),n=o(33);const r={class:"input-field"},s=["for"],i=["id","type","value","placeholder","disabled","maxlength","minlength"],a={key:1,class:"error-message"};function u(e,t,o,u,c,d){return(0,l.uX)(),(0,l.CE)("div",r,[e.label?((0,l.uX)(),(0,l.CE)("label",{key:0,for:e.id,class:"input-label"},(0,n.v_)(e.label),9,s)):(0,l.Q3)("",!0),(0,l.Lk)("input",{id:e.id,type:e.type,value:e.modelValue,placeholder:e.placeholder,disabled:e.disabled,maxlength:e.maxlength,minlength:e.minlength,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),class:"input"},null,40,i),e.errorMessage?((0,l.uX)(),(0,l.CE)("p",a,(0,n.v_)(e.errorMessage),1)):(0,l.Q3)("",!0)])}const c=(0,l.pM)({name:"InputField",props:{id:{type:String,required:!0},label:{type:String,required:!0},type:{type:String,default:"text"},modelValue:{type:String,required:!0},placeholder:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1},maxlength:{type:Number,required:!1},minlength:{type:Number,required:!1},errorMessage:{type:String,required:!1}}});var d=o(262);const p=(0,d.A)(c,[["render",u],["__scopeId","data-v-493aa504"]]),m=p},939:(e,t,o)=>{o.d(t,{A:()=>v});var l=o(641),n=o(33),r=o(751);const s=o.p+"img/user1.8b23ecd3.png",i={class:"navbar"},a={class:"action-bubble"},u={class:"welcom"},c={key:0,class:"dropdown-menu"};function d(e,t,o,d,p,m){const g=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("header",i,[t[4]||(t[4]=(0,l.Lk)("div",{class:"logo"},[(0,l.Lk)("a",{href:"/"},"MonLogo")],-1)),(0,l.Lk)("div",{class:(0,n.C4)(["menu",{active:e.isMenuOpen}])},[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.menuItems,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e.name,class:(0,n.C4)({active:e.active})},[(0,l.bF)(g,{class:"link",to:e.link},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.name),1)])),_:2},1032,["to"])],2)))),128))])],2),(0,l.Lk)("div",a,[(0,l.Lk)("h1",u,"Bonjour, "+(0,n.v_)(e.username)+" !",1),(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.toggleDropdown&&e.toggleDropdown(...t)),class:"action-button"},t[3]||(t[3]=[(0,l.Lk)("img",{src:s,alt:"Profile",class:"profile-picture"},null,-1)])),e.isDropdownOpen?((0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,[(0,l.Lk)("a",{href:"#",onClick:t[1]||(t[1]=(0,r.D$)(((...t)=>e.profil&&e.profil(...t)),["prevent"]))},"Mon profil")]),(0,l.Lk)("li",null,[(0,l.Lk)("a",{href:"#",onClick:t[2]||(t[2]=(0,r.D$)(((...t)=>e.logout&&e.logout(...t)),["prevent"]))},"Se déconnecter")])])])):(0,l.Q3)("",!0)])])])}var p=o(220),m=o(866);const g=(0,l.pM)({name:"NavbarComponent",props:{menuItems:{type:Array,required:!0}},setup(){const e=(0,p.rd)(),t=(0,m.P)(),o=t.userProfile?t.userProfile.name:"Default Name",l=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("role"),e.push("/")},n=()=>{e.push({name:"profile"})};return{logout:l,profil:n,username:o}},data(){return{isMenuOpen:!1,isDropdownOpen:!1}},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen},toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}}});var h=o(262);const f=(0,h.A)(g,[["render",d]]),v=f},475:(e,t,o)=>{o.d(t,{A:()=>m});var l=o(641),n=o(33),r=o(751);const s={for:"select",class:"select-label"},i=["id"],a=["value"];function u(e,t,o,u,c,d){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("label",s,(0,n.v_)(e.label),1),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedOption=t),class:"gender-select",id:e.uniqueId},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.options,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,a)))),128))],8,i),[[r.u1,e.selectedOption]])])}const c=(0,l.pM)({name:"SelectComponent",props:{modelValue:{type:String,required:!1},options:{type:Array,required:!0},label:{type:String,default:"Sélectionnez une option"},id:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const o=(0,l.EW)((()=>e.id||`select-${Math.random().toString(36).substr(2,9)}`)),n=(0,l.EW)({get:()=>e.modelValue,set:e=>t("update:modelValue",e)});return{selectedOption:n,options:e.options,uniqueId:o}}});var d=o(262);const p=(0,d.A)(c,[["render",u],["__scopeId","data-v-e67af60c"]]),m=p},347:(e,t,o)=>{o.d(t,{A:()=>d});var l=o(641),n=o(33);const r={class:"sidebar"},s=["href"];function i(e,t,o,i,a,u){return(0,l.uX)(),(0,l.CE)("aside",r,[(0,l.Lk)("nav",null,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.menuItems,(e=>((0,l.uX)(),(0,l.CE)("li",{key:e.name,class:(0,n.C4)({active:e.active})},[(0,l.Lk)("a",{href:e.link},(0,n.v_)(e.name),9,s)],2)))),128))])])])}const a=(0,l.pM)({name:"SidebarComponent",props:{menuItems:{type:Array,required:!0}}});var u=o(262);const c=(0,u.A)(a,[["render",i],["__scopeId","data-v-8ce43eac"]]),d=c},517:(e,t,o)=>{o.r(t),o.d(t,{default:()=>I});var l=o(641),n=o(33);const r=o.p+"img/user.8b23ecd3.png",s={key:0,class:"profile-container"},i={key:0,src:r,alt:"Profile Image",class:"profile-image"},a={key:1,class:"profile"};function u(e,t,o,r,u,c){const d=(0,l.g2)("NavBar"),p=(0,l.g2)("ButtonComponent");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(d,{menuItems:e.filteredMenuItems},null,8,["menuItems"]),e.isAuthenticated?((0,l.uX)(),(0,l.CE)("div",s,[(0,l.Lk)("main",null,[e.imageUrl||e.defaultImage?((0,l.uX)(),(0,l.CE)("img",i)):(0,l.Q3)("",!0),t[4]||(t[4]=(0,l.Lk)("h1",null,"Profil de l'utilisateur",-1)),(0,l.Lk)("p",null,[t[0]||(t[0]=(0,l.Lk)("strong",null,"Nom :",-1)),(0,l.eW)(" "+(0,n.v_)(e.name),1)]),(0,l.Lk)("p",null,[t[1]||(t[1]=(0,l.Lk)("strong",null,"Email :",-1)),(0,l.eW)(" "+(0,n.v_)(e.email),1)]),(0,l.Lk)("p",null,[t[2]||(t[2]=(0,l.Lk)("strong",null,"Role :",-1)),(0,l.eW)(" "+(0,n.v_)(e.role),1)]),(0,l.bF)(p,{type:"submit",class:"btn-primary"},{default:(0,l.k6)((()=>t[3]||(t[3]=[(0,l.eW)(" Update ")]))),_:1})])])):((0,l.uX)(),(0,l.CE)("div",a,t[5]||(t[5]=[(0,l.Lk)("p",null,"Veuillez vous connecter pour modifier votre profil.",-1)])))],64)}var c=o(953),d=o(347),p=o(523),m=o(939),g=o(189),h=o(475),f=o(639),v=o(220),k=o(866);const y=(0,l.pM)({name:"Profile",components:{SidebarComponent:d.A,ButtonComponent:p.A,InputField:g.A,SelectComponent:h.A,ImageUpload:f.A,NavBar:m.A},props:{entityType:{type:String,required:!0}},setup(e){const t=(0,k.P)(),o=localStorage.getItem("role")||"Utilisateur",l=(localStorage.getItem("token"),(0,c.KR)([])),n=(0,c.KR)([]),r=((0,v.rd)(),(0,c.KR)(t.userProfile.name)),s=(0,c.KR)(t.userProfile.email),i=t.isAuthenticated,a=(0,c.KR)(""),u=(0,c.KR)("../assets/user.png"),d=null,p=(0,c.KR)("../assets/user.png");function m(){console.log("Form submitted")}const g=(0,c.KR)([{name:"Tableau de Bord",link:"/dashboard",active:!1,visibleTo:["Admin","Client","Manager","Utilisateur"]},{name:"Liste des Utilisateurs",link:"/liste",active:!1,visibleTo:["Admin","Client","Manager"]},{name:"Liste des contract",link:"/contract",active:!0,visibleTo:["Admin","Client"]}]),h=g.value.filter((e=>e.visibleTo.includes(o)));return{role:o,isAuthenticated:i,menuItems:g,name:r,email:s,users:n,entities:l,previewImage:d,defaultImage:p,filteredMenuItems:h,imageUrl:a,submitForm:m,defaultImageUrl:u}}});var b=o(262);const C=(0,b.A)(y,[["render",u]]),I=C},866:(e,t,o)=>{o.d(t,{P:()=>r});var l=o(615),n=o(6);const r=(0,l.nY)({id:"auth",state:()=>({token:localStorage.getItem("token")||null,userProfile:null,users:[],userList:[],listContract:[],listClients:[],listManagers:[],listUtilisateurs:[],isAuthenticated:!!localStorage.getItem("token")}),actions:{async performLogin(e,t){try{const o=await(0,n.iD)(e,t),l=o.token,r=o.role,s=o.id;this.token=l,localStorage.setItem("token",l),localStorage.setItem("role",r),localStorage.setItem("id",s),this.isAuthenticated=!0,await this.fetchUserProfile(l),await this.fetchUsers(r,l),await this.fetchContract(r,l)}catch(o){throw console.error("Authentication failed:",o),new Error("Login failed")}},async fetchUserProfile(e){if(e)try{const t=await(0,n.VM)(e);this.userProfile=t,this.isAuthenticated=!0}catch(t){console.error("Failed to fetch user profile:",t),this.isAuthenticated=!1}else console.error("No token provided")},async fetchUsers(e,t){if(t)try{const o=await(0,n.ZZ)(e,t);console.log("storage",o),this.users=o,console.log(this.users),this.isAuthenticated=!0}catch(o){console.error("Failed to fetch user:",o),this.isAuthenticated=!1}else console.error("No token provided")},async fetchUsersBY(e,t){if(t)try{const o=await(0,n.lo)(e,t);console.log("storage",o),this.userList=o,console.log("liste ",this.userList)}catch(o){console.error("Failed to fetch user:",o),this.isAuthenticated=!1}else console.error("No token provided")},async fetchContract(e,t){if(t)try{const o=await(0,n.PF)(e,t);console.log("storage",o),this.listContract=o,console.log("liste ",this.listContract)}catch(o){console.error("Failed to fetch user:",o),this.isAuthenticated=!1}else console.error("No token provided")},async performLogout(){if(this.token)try{await(0,n.y4)(this.token),this.isAuthenticated=!1,this.userProfile=null,localStorage.removeItem("token"),localStorage.removeItem("role"),localStorage.removeItem("id")}catch(e){console.error("Failed to logout:",e)}else console.error("No token provided")},async addUser(e){},async fetchUsersByRole(e){if(this.token)try{const t=await(0,n.ZZ)(e,this.token);"client"===e?this.listClients=t:"manager"===e?this.listManagers=t:this.listUtilisateurs=t}catch(t){console.error(`Failed to fetch ${e}s:`,t)}else console.error("No token provided")}}})}}]);
//# sourceMappingURL=356.98e1b3ec.js.map