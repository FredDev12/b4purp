(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15ea48ba"],{"0da1":function(e,t,o){"use strict";o("7233")},"14f4":function(e,t,o){},3724:function(e,t,o){"use strict";var r=o("7a23");const l={for:"select",class:"select-label"},a=["id"],n=["value"];function c(e,t,o,c,s,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("label",l,Object(r["toDisplayString"])(e.label),1),Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedOption=t),class:"gender-select",id:e.uniqueId},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.options,e=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("option",{key:e.value,value:e.value},Object(r["toDisplayString"])(e.label),9,n))),128))],8,a),[[r["vModelSelect"],e.selectedOption]])])}var s=Object(r["defineComponent"])({name:"SelectComponent",props:{modelValue:{type:String,required:!1},options:{type:Array,required:!0},label:{type:String,default:"Sélectionnez une option"},id:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const o=Object(r["computed"])(()=>e.id||"select-"+Math.random().toString(36).substr(2,9)),l=Object(r["computed"])({get:()=>e.modelValue,set:e=>t("update:modelValue",e)});return{selectedOption:l,options:e.options,uniqueId:o}}}),i=(o("0da1"),o("6b0d")),d=o.n(i);const u=d()(s,[["render",c],["__scopeId","data-v-657b3cd4"]]);t["a"]=u},"4d62":function(e,t,o){"use strict";o.r(t);var r=o("7a23");const l={class:"register"},a={class:"form-group"},n={key:0,class:"error"};function c(e,t,o,c,s,i){const d=Object(r["resolveComponent"])("NavBar"),u=Object(r["resolveComponent"])("InputField"),p=Object(r["resolveComponent"])("SelectComponent"),m=Object(r["resolveComponent"])("ButtonComponent");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(d,{menuItems:e.filteredMenuItems},null,8,["menuItems"]),Object(r["createElementVNode"])("div",l,[t[13]||(t[13]=Object(r["createElementVNode"])("h1",null,"Ajouter un User",-1)),Object(r["createElementVNode"])("form",{onSubmit:t[10]||(t[10]=Object(r["withModifiers"])((...t)=>e.handleRegister&&e.handleRegister(...t),["prevent"]))},[Object(r["createElementVNode"])("div",a,[t[12]||(t[12]=Object(r["createElementVNode"])("label",null,"Type d'utilisateur:",-1)),Object(r["withDirectives"])(Object(r["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.userType=t)},t[11]||(t[11]=[Object(r["createElementVNode"])("option",{value:""},"Sélectionnez le type",-1),Object(r["createElementVNode"])("option",{value:"Utilisateur"},"Utilisateur",-1),Object(r["createElementVNode"])("option",{value:"Manager"},"Manager",-1)]),512),[[r["vModelSelect"],e.userType]]),Object(r["createVNode"])(u,{id:"name",label:"Nom",modelValue:e.form.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.name=t),type:"text",placeholder:"Nom",required:""},null,8,["modelValue"]),Object(r["createVNode"])(u,{id:"email",label:"Email",modelValue:e.form.email,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.email=t),type:"email",placeholder:"Votre email","error-message":e.emailError,required:""},null,8,["modelValue","error-message"]),Object(r["createVNode"])(u,{id:"password",label:"Mot de passe",modelValue:e.form.password,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.password=t),type:"password",placeholder:"Votre mot de passe","error-message":e.passwordError,required:""},null,8,["modelValue","error-message"]),Object(r["createVNode"])(u,{id:"password",label:"Confirmez le Mot de passe",modelValue:e.form.confirmPassword,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.confirmPassword=t),type:"password",placeholder:"Confirmez le mot de passe","error-message":e.passwordError,required:""},null,8,["modelValue","error-message"]),"Utilisateur"===e.userType?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0,label:"Sélectionnez un Manager",modelValue:e.form.managerId,"onUpdate:modelValue":t[5]||(t[5]=t=>e.form.managerId=t),options:e.managerOptions,placeholder:"Sélectionnez un Manager"},null,8,["modelValue","options"])):Object(r["createCommentVNode"])("",!0),"Manager"===e.userType?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:1,label:"Sélectionnez un Client",modelValue:e.form.clientId,"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.clientId=t),options:e.clientOptions,placeholder:"Sélectionnez un Client"},null,8,["modelValue","options"])):Object(r["createCommentVNode"])("",!0),"Utilisateur"===e.userType?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:2,id:"task",label:"tache",modelValue:e.form.task,"onUpdate:modelValue":t[7]||(t[7]=t=>e.form.task=t),type:"text",placeholder:"Confirmez le mot de passe",options:e.managerOptions,"error-message":e.passwordError,required:""},null,8,["modelValue","options","error-message"])):Object(r["createCommentVNode"])("",!0),"Utilisateur"===e.userType?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:3,id:"etat",label:"status",modelValue:e.form.etat,"onUpdate:modelValue":t[8]||(t[8]=t=>e.form.etat=t),type:"text",placeholder:"Confirmez le mot de passe",options:e.managerOptions,"error-message":e.passwordError,required:""},null,8,["modelValue","options","error-message"])):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("input",{type:"file",onChange:t[9]||(t[9]=(...t)=>e.onFileChange&&e.onFileChange(...t))},null,32)]),Object(r["createVNode"])(m,{type:"submit",class:"btn-primary",disabled:e.loading},{default:Object(r["withCtx"])(()=>[e.loading?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:0},[Object(r["createTextVNode"])("Chargement...")],64)):(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[Object(r["createTextVNode"])("Ajouter")],64))]),_:1},8,["disabled"]),e.apiError?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",n,Object(r["toDisplayString"])(e.apiError),1)):Object(r["createCommentVNode"])("",!0)],32)])],64)}var s=o("6605"),i=o("3a50"),d=o("e4c3"),u=o("8192"),p=o("3724"),m=o("9529"),b=o("d000"),O=o("5d04"),j=Object(r["defineComponent"])({name:"Register",components:{ButtonComponent:d["a"],InputField:u["a"],SelectComponent:p["a"],ImageUpload:m["a"],NavBar:b["a"]},data(){return{filteredMenuItems:[],username:"Invité",role:"User",userRole:"User"}},setup(){Object(s["c"])();const e=Object(O["a"])(),t=Object(r["ref"])(localStorage.getItem("role")||"User"),o=Object(r["ref"])(""),l=Object(r["reactive"])({name:"",email:"",password:"",confirmPassword:"",photo:null,role:"",managerId:"",clientId:"",utilisateurId:"",task:"",etat:""}),a=Object(r["ref"])([]),n=Object(r["ref"])([]);function c(e){const t=e.target;t.files&&(l.photo=t.files[0])}const d=Object(r["ref"])(""),u=Object(r["ref"])(""),p=Object(r["ref"])(""),m=Object(r["ref"])(!1),b=Object(r["ref"])([{name:"Tableau de Bord",link:"/dashboard",active:!1,visibleTo:["Admin","Client","Manager","Utilisateur"]},{name:"Liste des Utilisateurs",link:"/liste",active:!1,visibleTo:["Admin","Client","Manager"]},{name:"Mon Profil",link:"/profile",active:!0,visibleTo:["Admin","Client","Manager","Utilisateur"]}]),j=b.value.filter(e=>e.visibleTo.includes(t.value)),g=async()=>{try{return e.users.map(e=>({value:e.id.toString(),label:e.name}))}catch(t){console.error("Failed to fetch managers:",t)}},f=async()=>{try{return e.users.map(e=>({value:e.id.toString(),label:e.name}))}catch(t){console.error("Failed to fetch clients:",t)}};Object(r["watch"])(o,async e=>{"user"===e?a.value=await g()||[]:"manager"===e&&(n.value=await f()||[])});const h=async()=>{console.log(l),m.value=!0,d.value="",u.value="",p.value="";o.value;const e=new FormData;e.append("name",l.name),e.append("email",l.email),e.append("password",l.password),e.append("role",l.role),e.append("managerId",l.managerId),e.append("clientId",l.clientId),e.append("utilisateurId",l.utilisateurId),e.append("task",l.task),e.append("etat",l.etat),l.photo&&e.append("photo",l.photo);try{console.log(l),await Object(i["g"])(e)}catch(t){console.error("Registration failed:",t),p.value="Une erreur est survenue lors de l'inscription. Veuillez réessayer."}finally{m.value=!1}};return{handleRegister:h,form:l,filteredMenuItems:j,emailError:d,onFileChange:c,role:t,passwordError:u,apiError:p,userType:o,loading:m,managerOptions:a,clientOptions:n}}}),g=o("6b0d"),f=o.n(g);const h=f()(j,[["render",c]]);t["default"]=h},"5d04":function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var r=o("be92"),l=o("3a50");const a=Object(r["b"])({id:"auth",state:()=>({token:localStorage.getItem("token")||null,userProfile:null,users:[],userList:[],listClients:[],listManagers:[],listUtilisateurs:[],isAuthenticated:!!localStorage.getItem("token")}),actions:{async performLogin(e,t){try{const o=await Object(l["d"])(e,t),r=o.token,a=o.role;this.token=r,localStorage.setItem("token",r),localStorage.setItem("role",a),this.isAuthenticated=!0,await this.fetchUserProfile(r),await this.fetchUsers(a,r)}catch(o){throw console.error("Authentication failed:",o),new Error("Login failed")}},async fetchUserProfile(e){if(e)try{const t=await Object(l["a"])(e);this.userProfile=t,this.isAuthenticated=!0}catch(t){console.error("Failed to fetch user profile:",t),this.isAuthenticated=!1}else console.error("No token provided")},async fetchUsers(e,t){if(t)try{const o=await Object(l["c"])(e,t);console.log("storage",o),this.users=o,console.log(this.users)}catch(o){console.error("Failed to fetch user:",o),this.isAuthenticated=!1}else console.error("No token provided")},async fetchUsersBY(e,t){if(t)try{const o=await Object(l["b"])(e,t);console.log("storage",o),this.userList=o,console.log("liste ",this.userList)}catch(o){console.error("Failed to fetch user:",o),this.isAuthenticated=!1}else console.error("No token provided")},async performLogout(){if(this.token)try{await Object(l["e"])(this.token),this.isAuthenticated=!1,this.userProfile=null,localStorage.removeItem("token"),localStorage.removeItem("role")}catch(e){console.error("Failed to logout:",e)}else console.error("No token provided")},async addUser(e){},async fetchUsersByRole(e){if(this.token)try{const t=await Object(l["c"])(e,this.token);"client"===e?this.listClients=t:"manager"===e?this.listManagers=t:this.listUtilisateurs=t}catch(t){console.error(`Failed to fetch ${e}s:`,t)}else console.error("No token provided")}}})},7233:function(e,t,o){},8192:function(e,t,o){"use strict";var r=o("7a23");const l={class:"input-field"},a=["for"],n=["id","type","value","placeholder","disabled","maxlength","minlength"],c={key:1,class:"error-message"};function s(e,t,o,s,i,d){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",l,[e.label?(Object(r["openBlock"])(),Object(r["createElementBlock"])("label",{key:0,for:e.id,class:"input-label"},Object(r["toDisplayString"])(e.label),9,a)):Object(r["createCommentVNode"])("",!0),Object(r["createElementVNode"])("input",{id:e.id,type:e.type,value:e.modelValue,placeholder:e.placeholder,disabled:e.disabled,maxlength:e.maxlength,minlength:e.minlength,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),class:"input"},null,40,n),e.errorMessage?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",c,Object(r["toDisplayString"])(e.errorMessage),1)):Object(r["createCommentVNode"])("",!0)])}var i=Object(r["defineComponent"])({name:"InputField",props:{id:{type:String,required:!0},label:{type:String,required:!0},type:{type:String,default:"text"},modelValue:{type:String,required:!0},placeholder:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1},maxlength:{type:Number,required:!1},minlength:{type:Number,required:!1},errorMessage:{type:String,required:!1}}}),d=(o("be8d"),o("6b0d")),u=o.n(d);const p=u()(i,[["render",s],["__scopeId","data-v-424e3b7f"]]);t["a"]=p},"8b2b":function(e,t,o){"use strict";o("14f4")},9529:function(e,t,o){"use strict";var r=o("7a23");const l={class:"image-upload-container"};function a(e,t,o,a,n,c){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",l,[Object(r["createElementVNode"])("input",{type:"file",onChange:t[0]||(t[0]=(...t)=>e.handleFileUpload&&e.handleFileUpload(...t)),accept:".png, .jpg, .jpeg, .csv",class:"file-input"},null,32)])}var n=Object(r["defineComponent"])({name:"ImageUpload",emits:["update:file"],setup(e,{emit:t}){const o=e=>{const o=e.target,r=o.files,l=r&&r[0];l&&t("update:file",l)};return{handleFileUpload:o}}}),c=(o("8b2b"),o("6b0d")),s=o.n(c);const i=s()(n,[["render",a],["__scopeId","data-v-923aba26"]]);t["a"]=i},be8d:function(e,t,o){"use strict";o("d2e2")},d000:function(e,t,o){"use strict";var r=o("7a23"),l=o("fd5a"),a=o.n(l);const n={class:"navbar"},c={class:"action-bubble"},s={key:0,class:"dropdown-menu"};function i(e,t,o,l,i,d){const u=Object(r["resolveComponent"])("router-link");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createElementVNode"])("header",n,[t[4]||(t[4]=Object(r["createElementVNode"])("div",{class:"logo"},[Object(r["createElementVNode"])("a",{href:"/"},"MonLogo")],-1)),Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(["menu",{active:e.isMenuOpen}])},[Object(r["createElementVNode"])("ul",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e.menuItems,e=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("li",{key:e.name,class:Object(r["normalizeClass"])({active:e.active})},[Object(r["createVNode"])(u,{class:"link",to:e.link},{default:Object(r["withCtx"])(()=>[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name),1)]),_:2},1032,["to"])],2))),128))])],2),Object(r["createElementVNode"])("div",c,[Object(r["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...t)=>e.toggleDropdown&&e.toggleDropdown(...t)),class:"action-button"},t[3]||(t[3]=[Object(r["createElementVNode"])("img",{src:a.a,alt:"Profile",class:"profile-picture"},null,-1)])),e.isDropdownOpen?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",s,[Object(r["createElementVNode"])("ul",null,[Object(r["createElementVNode"])("li",null,[Object(r["createElementVNode"])("a",{href:"#",onClick:t[1]||(t[1]=Object(r["withModifiers"])((...t)=>e.profil&&e.profil(...t),["prevent"]))},"Mon profil")]),Object(r["createElementVNode"])("li",null,[Object(r["createElementVNode"])("a",{href:"#",onClick:t[2]||(t[2]=Object(r["withModifiers"])((...t)=>e.logout&&e.logout(...t),["prevent"]))},"Se déconnecter")])])])):Object(r["createCommentVNode"])("",!0)])])])}var d=o("6605"),u=Object(r["defineComponent"])({name:"NavbarComponent",props:{menuItems:{type:Array,required:!0}},setup(){const e=Object(d["c"])(),t=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("role"),e.push("/")},o=()=>{e.push({name:"profile"})};return{logout:t,profil:o}},data(){return{isMenuOpen:!1,isDropdownOpen:!1}},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen},toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}}}),p=o("6b0d"),m=o.n(p);const b=m()(u,[["render",i]]);t["a"]=b},d2e2:function(e,t,o){},fd5a:function(e,t,o){e.exports=o.p+"img/user1.399c5f70.png"}}]);
//# sourceMappingURL=chunk-15ea48ba.f0c37706.js.map