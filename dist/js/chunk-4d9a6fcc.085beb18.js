(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d9a6fcc"],{4601:function(e,t,n){"use strict";n.r(t);var l=n("7a23");const c={class:"dashboard"},o={class:"dashboard-container"},a={class:"user-profile"},r={class:"user-profile"},i=["onClick"],s=["onClick"],d={class:"user-profile"},u=["onClick"],b=["onClick"],m={class:"user-profile"},O=["onClick"],j=["onClick"];function E(e,t,n,E,N,p){const V=Object(l["resolveComponent"])("NavBar");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",c,[Object(l["createVNode"])(V,{menuItems:e.filteredMenuItems},null,8,["menuItems"]),Object(l["createElementVNode"])("main",o,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("h1",null,"Bienvenue sur le tableau de bord, "+Object(l["toDisplayString"])(e.username)+" ("+Object(l["toDisplayString"])(e.role)+") !",1)]),Object(l["createElementVNode"])("section",a,[t[1]||(t[1]=Object(l["createElementVNode"])("h2",null,"Profil Utilisateur",-1)),Object(l["createElementVNode"])("table",null,[t[0]||(t[0]=Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",null,"Nom"),Object(l["createElementVNode"])("th",null,"Rôle")],-1)),Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.username),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.role),1)])])]),Object(l["createElementVNode"])("section",r,[t[3]||(t[3]=Object(l["createElementVNode"])("h2",null,"Clients",-1)),Object(l["createElementVNode"])("table",null,[t[2]||(t[2]=Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",null,"Nom"),Object(l["createElementVNode"])("th",null,"Contrat"),Object(l["createElementVNode"])("th",null,"Actions")],-1)),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.clientList,t=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t.id},[Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(t.name),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(t.contractId||"Pas de contrat"),1),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("button",{onClick:n=>e.editEntity(t),class:"edit-button"},"Éditer",8,i),Object(l["createElementVNode"])("button",{onClick:n=>e.deleteEntity(t.id),class:"delete-button"},"Supprimer",8,s)])]))),128))])]),Object(l["createElementVNode"])("section",d,[t[5]||(t[5]=Object(l["createElementVNode"])("h2",null,"Managers",-1)),Object(l["createElementVNode"])("table",null,[t[4]||(t[4]=Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",null,"Nom"),Object(l["createElementVNode"])("th",null,"Contrat"),Object(l["createElementVNode"])("th",null,"Actions")],-1)),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.managerList,t=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t.id},[Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(t.name),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(t.contractId||"Pas de contrat"),1),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("button",{onClick:n=>e.editEntity(t),class:"edit-button"},"Éditer",8,u),Object(l["createElementVNode"])("button",{onClick:n=>e.deleteEntity(t.id),class:"delete-button"},"Supprimer",8,b)])]))),128))])]),Object(l["createElementVNode"])("section",m,[t[7]||(t[7]=Object(l["createElementVNode"])("h2",null,"Utilisateurs",-1)),Object(l["createElementVNode"])("table",null,[t[6]||(t[6]=Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",null,"Nom"),Object(l["createElementVNode"])("th",null,"Manager"),Object(l["createElementVNode"])("th",null,"Contrat"),Object(l["createElementVNode"])("th",null,"Tache"),Object(l["createElementVNode"])("th",null,"Status"),Object(l["createElementVNode"])("th",null,"Actions")],-1)),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.userList,t=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t.id},[Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(t.name),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.CustomerList[t.managerId-1].name),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.ContractList[t.contractId]||"Pas de contrat"),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(t.task),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(t.status),1),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("button",{onClick:n=>e.editEntity(t),class:"edit-button"},"Éditer",8,O),Object(l["createElementVNode"])("button",{onClick:n=>e.deleteEntity(t.id),class:"delete-button"},"Supprimer",8,j)])]))),128))])])])])}var N=n("e4c3"),p=n("8c07"),V=n("d000"),v=n("6605"),g=n("dfd5"),k=Object(l["defineComponent"])({name:"Dashboard",components:{ButtonComponent:N["a"],SidebarComponent:p["a"],NavBar:V["a"]},data(){return{filteredMenuItems:[],username:"Invité",role:"User"}},setup(){const e=Object(v["c"])(),t=Object(l["ref"])(localStorage.getItem("name")||"Invité"),n=Object(l["ref"])(localStorage.getItem("role")||"User"),c=Object(l["ref"])([]),o=Object(l["ref"])(""),a=Object(l["ref"])(localStorage.getItem("id")||"1"),r=Object(l["ref"])([]),i=Object(l["ref"])([]),s=Object(l["ref"])([]),d=Object(l["ref"])([]),u=Object(l["ref"])([]),b=Object(l["ref"])([{name:"Tableau de Bord",link:"/dashboard",active:!1,visibleTo:["Admin","Client","Manager","Utilisateur"]},{name:"Liste des Utilisateurs",link:"/liste",active:!1,visibleTo:["Admin","Client","Manager"]},{name:"Mon Profil",link:"/profile",active:!0,visibleTo:["Admin","Client","Manager","Utilisateur"]}]),m=b.value.filter(e=>e.visibleTo.includes(n.value));Object(l["onMounted"])(async()=>{try{let e;const t=n.value;switch(t){case"Admin":o.value="Admin";break;case"Client":o.value="Client";break;case"Manager":o.value="Manager";break;case"Utilisateur":o.value="Utilisateur";break;default:return void console.warn("Type d'entité inconnu: "+t)}if(console.log(o.value),e=await Object(g["d"])({role:o.value,id:a.value}),console.log(e),e&&Array.isArray(e)){c.value=e;const t=await Object(g["b"])(),n=e;u.value=n,d.value=t,console.log("conctract ",d.value),r.value=n.filter(e=>"Client"===e.role),i.value=n.filter(e=>"Manager"===e.role),s.value=n.filter(e=>"Utilisateur"===e.role),console.log("\nliste\n ",i.value)}else console.warn("Aucune donnée reçue pour la liste des entités.")}catch(e){console.error("Une erreur est survenue lors de la récupération des données.",e)}});const O=e=>{console.log("Edit entity:",e)},j=e=>{console.log("Delete entity with ID:",e)},E=e=>{console.log("Editing client:",e)},N=e=>{console.log("Editing client:",e)},p=()=>{localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("token"),e.push({name:"Login"})};return{username:t,role:n,menuItems:b,filteredMenuItems:m,CustomerList:u,entities:c,entityTitle:o,editEntity:O,userId:a,deleteEntity:j,editContract:E,deleteContract:N,logout:p,clientList:r,managerList:i,userList:s,ContractList:d}}}),f=n("6b0d"),C=n.n(f);const h=C()(k,[["render",E]]);t["default"]=h},"8c07":function(e,t,n){"use strict";var l=n("7a23");const c={class:"sidebar"},o=["href"];function a(e,t,n,a,r,i){return Object(l["openBlock"])(),Object(l["createElementBlock"])("aside",c,[Object(l["createElementVNode"])("nav",null,[Object(l["createElementVNode"])("ul",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.menuItems,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e.name,class:Object(l["normalizeClass"])({active:e.active})},[Object(l["createElementVNode"])("a",{href:e.link},Object(l["toDisplayString"])(e.name),9,o)],2))),128))])])])}var r=Object(l["defineComponent"])({name:"SidebarComponent",props:{menuItems:{type:Array,required:!0}}}),i=(n("9261"),n("6b0d")),s=n.n(i);const d=s()(r,[["render",a],["__scopeId","data-v-74b7da77"]]);t["a"]=d},9261:function(e,t,n){"use strict";n("d558")},d000:function(e,t,n){"use strict";var l=n("7a23");const c={class:"navbar"};function o(e,t,n,o,a,r){const i=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("header",c,[t[1]||(t[1]=Object(l["createElementVNode"])("div",{class:"logo"},[Object(l["createElementVNode"])("a",{href:"/"},"MonLogo")],-1)),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["menu",{active:e.isMenuOpen}])},[Object(l["createElementVNode"])("ul",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.menuItems,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e.name,class:Object(l["normalizeClass"])({active:e.active})},[Object(l["createVNode"])(i,{class:"link",to:e.link},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.name),1)]),_:2},1032,["to"])],2))),128))])],2),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["menu",{active:e.isMenuOpen}])},[Object(l["createElementVNode"])("ul",null,[Object(l["createElementVNode"])("li",null,[Object(l["createElementVNode"])("a",{href:"#",onClick:t[0]||(t[0]=Object(l["withModifiers"])((...t)=>e.logout&&e.logout(...t),["prevent"]))},"Déconnexion")])])],2)])])}var a=n("6605"),r=Object(l["defineComponent"])({name:"NavbarComponent",props:{menuItems:{type:Array,required:!0}},setup(){const e=Object(a["c"])(),t=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("role"),e.push("/")};return{logout:t}},data(){return{isMenuOpen:!1}},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen}}}),i=n("6b0d"),s=n.n(i);const d=s()(r,[["render",o]]);t["a"]=d},d558:function(e,t,n){}}]);
//# sourceMappingURL=chunk-4d9a6fcc.085beb18.js.map