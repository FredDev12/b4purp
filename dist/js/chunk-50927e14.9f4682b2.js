(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50927e14"],{"0da1":function(e,t,l){"use strict";l("7233")},"14f4":function(e,t,l){},3724:function(e,t,l){"use strict";var n=l("7a23");const r={for:"select",class:"select-label"},o=["id"],a=["value"];function c(e,t,l,c,d,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("label",r,Object(n["toDisplayString"])(e.label),1),Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedOption=t),class:"gender-select",id:e.uniqueId},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.options,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{key:e.value,value:e.value},Object(n["toDisplayString"])(e.label),9,a))),128))],8,o),[[n["vModelSelect"],e.selectedOption]])])}var d=Object(n["defineComponent"])({name:"SelectComponent",props:{modelValue:{type:String,required:!1},options:{type:Array,required:!0},label:{type:String,default:"Sélectionnez une option"},id:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const l=Object(n["computed"])(()=>e.id||"select-"+Math.random().toString(36).substr(2,9)),r=Object(n["computed"])({get:()=>e.modelValue,set:e=>t("update:modelValue",e)});return{selectedOption:r,options:e.options,uniqueId:l}}}),i=(l("0da1"),l("6b0d")),s=l.n(i);const u=s()(d,[["render",c],["__scopeId","data-v-657b3cd4"]]);t["a"]=u},"4d62":function(e,t,l){"use strict";l.r(t);var n=l("7a23");const r={class:"dashboard"},o={class:"client-container"},a={key:1,class:"add-user-form"},c={key:2,class:"client-table"},d={key:0},i={key:0},s={key:3};function u(e,t,l,u,m,b){const p=Object(n["resolveComponent"])("NavBar"),O=Object(n["resolveComponent"])("ButtonComponent"),j=Object(n["resolveComponent"])("AddUser");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createVNode"])(p,{menuItems:e.filteredMenuItems},null,8,["menuItems"]),Object(n["createElementVNode"])("main",o,[Object(n["createElementVNode"])("h1",null,"Liste des "+Object(n["toDisplayString"])(e.entityTitle),1),e.canAddEntity?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:0,onClick:e.toggleAddUserForm},{default:Object(n["withCtx"])(()=>[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.showAddUserForm?"Annuler":"Ajouter un utilisateur"),1)]),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0),e.showAddUserForm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createVNode"])(j,{onUserAdded:e.refreshList},null,8,["onUserAdded"])])):Object(n["createCommentVNode"])("",!0),!e.showAddUserForm&&e.entities.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("table",c,[Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[t[0]||(t[0]=Object(n["createElementVNode"])("th",null,"Nom complet",-1)),t[1]||(t[1]=Object(n["createElementVNode"])("th",null,"Email",-1)),t[2]||(t[2]=Object(n["createElementVNode"])("th",null,"Tache",-1)),t[3]||(t[3]=Object(n["createElementVNode"])("th",null,"Status",-1)),t[4]||(t[4]=Object(n["createElementVNode"])("th",null,"Rôle",-1)),e.canEditOrDelete?(Object(n["openBlock"])(),Object(n["createElementBlock"])("th",d,"Actions")):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.entities,l=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:l.id},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(l.name),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(l.email),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(l.task),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(l.status),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(l.role),1),e.canEditOrDelete?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",i,[Object(n["createVNode"])(O,{onClick:t=>e.editEntity(l.id)},{default:Object(n["withCtx"])(()=>t[5]||(t[5]=[Object(n["createTextVNode"])("Éditer")])),_:2},1032,["onClick"]),Object(n["createVNode"])(O,{onClick:t=>e.deleteEntity(l.id)},{default:Object(n["withCtx"])(()=>t[6]||(t[6]=[Object(n["createTextVNode"])("Supprimer")])),_:2},1032,["onClick"])])):Object(n["createCommentVNode"])("",!0)]))),128))])])):e.showAddUserForm?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",s,"Aucun "+Object(n["toDisplayString"])(e.entityTitle.toLowerCase())+" trouvé.",1))])])}var m=l("8c07"),b=l("e4c3");const p={class:"register"},O={class:"form-group"},j={key:0,class:"error"};function g(e,t,l,r,o,a){const c=Object(n["resolveComponent"])("InputField"),d=Object(n["resolveComponent"])("SelectComponent"),i=Object(n["resolveComponent"])("ImageUpload"),s=Object(n["resolveComponent"])("ButtonComponent"),u=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",p,[t[12]||(t[12]=Object(n["createElementVNode"])("h1",null,"Inscription",-1)),Object(n["createElementVNode"])("form",{onSubmit:t[9]||(t[9]=Object(n["withModifiers"])((...t)=>e.handleRegister&&e.handleRegister(...t),["prevent"]))},[Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(c,{id:"name",label:"Nom",modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.name=t),type:"text",placeholder:"Nom",required:""},null,8,["modelValue"]),Object(n["createVNode"])(c,{id:"username",label:"Nom d'utilisateur",modelValue:e.form.username,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.username=t),type:"text",placeholder:"Nom d'utilisateur",required:""},null,8,["modelValue"]),Object(n["createVNode"])(c,{id:"email",label:"Email",modelValue:e.form.email,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.email=t),type:"email",placeholder:"Votre email","error-message":e.emailError,required:""},null,8,["modelValue","error-message"]),Object(n["createVNode"])(c,{id:"password",label:"Mot de passe",modelValue:e.form.password,"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.password=t),type:"password",placeholder:"Votre mot de passe","error-message":e.passwordError,required:""},null,8,["modelValue","error-message"]),Object(n["createVNode"])(c,{id:"birthDate",label:"Date de naissance",modelValue:e.form.birthDate,"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.birthDate=t),type:"date",placeholder:"Votre date de naissance",required:""},null,8,["modelValue"]),Object(n["createVNode"])(c,{id:"phoneNumber",label:"Téléphone",modelValue:e.form.phoneNumber,"onUpdate:modelValue":t[5]||(t[5]=t=>e.form.phoneNumber=t),type:"number",placeholder:"Votre numéro de téléphone",required:""},null,8,["modelValue"]),Object(n["createVNode"])(d,{id:"gender",modelValue:e.form.gender,"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.gender=t),options:e.genderOptions,label:"Genre",required:""},null,8,["modelValue","options"]),Object(n["createVNode"])(d,{id:"role",modelValue:e.form.role,"onUpdate:modelValue":t[7]||(t[7]=t=>e.form.role=t),options:e.roleOptions,label:"Rôle",required:""},null,8,["modelValue","options"]),Object(n["createVNode"])(c,{id:"address",label:"Adresse",modelValue:e.form.address,"onUpdate:modelValue":t[8]||(t[8]=t=>e.form.address=t),type:"text",placeholder:"Votre adresse",required:""},null,8,["modelValue"]),Object(n["createVNode"])(i,{"onUpdate:file":e.handleFile,required:""},null,8,["onUpdate:file"])]),Object(n["createVNode"])(s,{type:"submit",class:"btn-primary",disabled:e.loading},{default:Object(n["withCtx"])(()=>[e.loading?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createTextVNode"])("Chargement...")],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])("S'inscrire")],64))]),_:1},8,["disabled"]),e.apiError?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",j,Object(n["toDisplayString"])(e.apiError),1)):Object(n["createCommentVNode"])("",!0)],32),Object(n["createElementVNode"])("p",null,[Object(n["createVNode"])(u,{to:"/dashboardAdmin"},{default:Object(n["withCtx"])(()=>t[10]||(t[10]=[Object(n["createTextVNode"])("Accueil")])),_:1}),t[11]||(t[11]=Object(n["createTextVNode"])(". "))])])}var v=l("6605"),f=l("dfd5"),V=l("8192"),y=l("3724"),h=l("9529"),k=Object(n["defineComponent"])({name:"AddUserForm",components:{ButtonComponent:b["a"],InputField:V["a"],SelectComponent:y["a"],ImageUpload:h["a"]},setup(){const e=Object(v["c"])(),t=Object(n["ref"])(localStorage.getItem("id")?parseInt(localStorage.getItem("id")):null),l=Object(n["ref"])(localStorage.getItem("role")?localStorage.getItem("role"):null),r=Object(n["reactive"])({name:"",username:"",email:"",password:"",birthDate:"",phoneNumber:"",gender:"",address:"",file:null,role:"",createdBy:t.value}),o=Object(n["ref"])([{value:"Homme",label:"Homme"},{value:"Femme",label:"Femme"}]),a=Object(n["computed"])(()=>{switch(l.value){case"admin":return[{value:"client",label:"Client"},{value:"manager",label:"Manager"},{value:"user",label:"User"}];case"client":return[{value:"manager",label:"Manager"},{value:"user",label:"User"}];case"manager":return r.role="user",[{value:"user",label:"User"}];default:return[]}}),c=Object(n["ref"])(""),d=Object(n["ref"])(""),i=Object(n["ref"])(""),s=Object(n["ref"])(!1),u=e=>{r.file=e},m=e=>{const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;return t.test(e.trim())},b=async()=>{if(s.value=!0,c.value="",d.value="",i.value="",!m(r.email))return c.value="Veuillez entrer une adresse email valide.",void(s.value=!1);if(r.password.length<6)return d.value="Le mot de passe doit contenir au moins 6 caractères.",void(s.value=!1);r.createdBy=t.value;try{let t;if(!["client","manager","user"].includes(r.role))return i.value="Rôle non reconnu.",void console.error("Rôle non reconnu: "+r.role);t=await Object(f["a"])(r),console.log("Utilisateur ajouté par ID:",r.createdBy),e.push("/liste")}catch(l){i.value="Une erreur est survenue lors de l'inscription.",console.error(l)}finally{s.value=!1}};return{handleRegister:b,form:r,emailError:c,passwordError:d,apiError:i,loading:s,genderOptions:o,roleOptions:a,handleFile:u}}}),N=l("6b0d"),E=l.n(N);const B=E()(k,[["render",g]]);var C=B,S=l("d000"),U=Object(n["defineComponent"])({name:"UnifiedListWithAccessControl",components:{SidebarComponent:m["a"],ButtonComponent:b["a"],AddUserForm:C,NavBar:S["a"]},props:{entityType:{type:String,required:!0},currentRole:{type:String,required:!0,validator:e=>["Admin","Client","Manager"].includes(e)}},setup(e){const t=Object(n["ref"])([]),l=Object(n["ref"])(""),r=Object(n["ref"])(!1),o=Object(n["ref"])(localStorage.getItem("role")||"User"),a=Object(n["ref"])([{name:"Tableau de Bord",link:"/dashboard",active:!0,visibleTo:["Admin","Client","Manager"]},{name:"Gestion Utilisateur",link:"/liste",active:!1,visibleTo:["Admin","Client","Manager"]},{name:"Profil d'utilisateur",link:"/profile",active:!1,visibleTo:["Admin","Client","Manager"]}]),c=(Object(v["c"])(),Object(n["computed"])(()=>a.value.filter(e=>e.visibleTo.includes(o.value)))),d=Object(n["computed"])(()=>"Admin"===e.currentRole||"Client"===e.currentRole&&"Client"!==e.entityType||"Manager"===e.currentRole&&"Utilisateur"===e.entityType),i=Object(n["computed"])(()=>"Utilisateur"!==e.currentRole),s=async()=>{try{let e;const n=o.value;switch(n){case"Admin":l.value="Admin";break;case"Client":l.value="Client";break;case"Manager":l.value="Manager";break;case"Utilisateur":l.value="Utilisateur";break;default:return void console.warn("Type d'entité inconnu: "+n)}e=await Object(f["c"])(l.value),e&&Array.isArray(e)?t.value=e:console.warn("Aucune donnée reçue pour la liste des entités.")}catch(e){console.error("Une erreur est survenue lors de la récupération des données.",e)}};Object(n["onMounted"])(s);const u=e=>{i.value&&console.log("Edit entity:",e)},m=e=>{i.value&&console.log("Delete entity with ID:",e)},b=()=>{d.value&&(r.value=!r.value)},p=()=>{r.value=!1,s()};return{entities:t,entityTitle:l,filteredMenuItems:c,showAddUserForm:r,toggleAddUserForm:b,canAddEntity:d,canEditOrDelete:i,editEntity:u,deleteEntity:m,refreshList:p}}});const A=E()(U,[["render",u]]);t["default"]=A},7233:function(e,t,l){},8192:function(e,t,l){"use strict";var n=l("7a23");const r={class:"input-field"},o=["for"],a=["id","type","value","placeholder","disabled","maxlength","minlength"],c={key:1,class:"error-message"};function d(e,t,l,d,i,s){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[e.label?(Object(n["openBlock"])(),Object(n["createElementBlock"])("label",{key:0,for:e.id,class:"input-label"},Object(n["toDisplayString"])(e.label),9,o)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("input",{id:e.id,type:e.type,value:e.modelValue,placeholder:e.placeholder,disabled:e.disabled,maxlength:e.maxlength,minlength:e.minlength,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),class:"input"},null,40,a),e.errorMessage?(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",c,Object(n["toDisplayString"])(e.errorMessage),1)):Object(n["createCommentVNode"])("",!0)])}var i=Object(n["defineComponent"])({name:"InputField",props:{id:{type:String,required:!0},label:{type:String,required:!0},type:{type:String,default:"text"},modelValue:{type:String,required:!0},placeholder:{type:String,required:!0},disabled:{type:Boolean,required:!1,default:!1},maxlength:{type:Number,required:!1},minlength:{type:Number,required:!1},errorMessage:{type:String,required:!1}}}),s=(l("be8d"),l("6b0d")),u=l.n(s);const m=u()(i,[["render",d],["__scopeId","data-v-424e3b7f"]]);t["a"]=m},"8b2b":function(e,t,l){"use strict";l("14f4")},"8c07":function(e,t,l){"use strict";var n=l("7a23");const r={class:"sidebar"},o=["href"];function a(e,t,l,a,c,d){return Object(n["openBlock"])(),Object(n["createElementBlock"])("aside",r,[Object(n["createElementVNode"])("nav",null,[Object(n["createElementVNode"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.menuItems,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:e.name,class:Object(n["normalizeClass"])({active:e.active})},[Object(n["createElementVNode"])("a",{href:e.link},Object(n["toDisplayString"])(e.name),9,o)],2))),128))])])])}var c=Object(n["defineComponent"])({name:"SidebarComponent",props:{menuItems:{type:Array,required:!0}}}),d=(l("9261"),l("6b0d")),i=l.n(d);const s=i()(c,[["render",a],["__scopeId","data-v-74b7da77"]]);t["a"]=s},9261:function(e,t,l){"use strict";l("d558")},9529:function(e,t,l){"use strict";var n=l("7a23");const r={class:"image-upload-container"};function o(e,t,l,o,a,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("input",{type:"file",onChange:t[0]||(t[0]=(...t)=>e.handleFileUpload&&e.handleFileUpload(...t)),accept:".png, .jpg, .jpeg, .csv",class:"file-input"},null,32)])}var a=Object(n["defineComponent"])({name:"ImageUpload",emits:["update:file"],setup(e,{emit:t}){const l=e=>{const l=e.target,n=l.files,r=n&&n[0];r&&t("update:file",r)};return{handleFileUpload:l}}}),c=(l("8b2b"),l("6b0d")),d=l.n(c);const i=d()(a,[["render",o],["__scopeId","data-v-923aba26"]]);t["a"]=i},be8d:function(e,t,l){"use strict";l("d2e2")},d000:function(e,t,l){"use strict";var n=l("7a23");const r={class:"navbar"},o=["href"];function a(e,t,l,a,c,d){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("header",r,[t[1]||(t[1]=Object(n["createElementVNode"])("div",{class:"logo"},[Object(n["createElementVNode"])("a",{href:"/"},"MonLogo")],-1)),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["menu",{active:e.isMenuOpen}])},[Object(n["createElementVNode"])("ul",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.menuItems,e=>(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:e.name,class:Object(n["normalizeClass"])({active:e.active})},[Object(n["createElementVNode"])("a",{href:e.link},Object(n["toDisplayString"])(e.name),9,o)],2))),128))])],2),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["menu",{active:e.isMenuOpen}])},[Object(n["createElementVNode"])("ul",null,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("a",{href:"#",onClick:t[0]||(t[0]=Object(n["withModifiers"])((...t)=>e.logout&&e.logout(...t),["prevent"]))},"Déconnexion")])])],2)])])}var c=l("6605"),d=Object(n["defineComponent"])({name:"NavbarComponent",props:{menuItems:{type:Array,required:!0}},setup(){const e=Object(c["c"])(),t=()=>{localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("role"),e.push("/")};return{logout:t}},data(){return{isMenuOpen:!1}},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen}}}),i=l("6b0d"),s=l.n(i);const u=s()(d,[["render",a]]);t["a"]=u},d2e2:function(e,t,l){},d558:function(e,t,l){}}]);
//# sourceMappingURL=chunk-50927e14.9f4682b2.js.map