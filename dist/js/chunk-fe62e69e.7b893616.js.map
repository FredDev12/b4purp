{"version":3,"sources":["webpack:///./src/assets/wadoria.png","webpack:///./src/views/auth/Login.vue?3c96","webpack:///./src/views/auth/Login.vue?8ba5","webpack:///./src/views/auth/Login.vue","webpack:///./src/components/InputField.vue?8c3b","webpack:///./src/components/InputField.vue?b88f","webpack:///./src/components/InputField.vue","webpack:///./src/components/InputField.vue?b681"],"names":["module","exports","_hoisted_1","class","_hoisted_2","_hoisted_3","key","render","_ctx","_cache","$props","$setup","$data","$options","_component_InputField","_component_ButtonComponent","_component_router_link","src","alt","onSubmit","args","handleLogin","type","id","modelValue","form","email","$event","label","emailError","placeholder","required","password","passwordError","disabled","loading","default","_","apiError","to","name","components","ButtonComponent","InputField","router","async","value","validateEmail","length","response","console","log","message","token","localStorage","setItem","userInfo","username","role","push","path","query","error","re","test","__exports__","_hoisted_4","for","maxlength","minlength","onInput","$emit","target","errorMessage","props","String","Boolean","Number"],"mappings":"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","file":"js/chunk-fe62e69e.7b893616.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/wadoria.673e5e7d.png\";","import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nimport _imports_0 from '../../assets/wadoria.png';\nconst _hoisted_1 = { class: \"login-container\" };\nconst _hoisted_2 = { class: \"form-group\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"error\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n    const _component_InputField = _resolveComponent(\"InputField\");\n    const _component_ButtonComponent = _resolveComponent(\"ButtonComponent\");\n    const _component_router_link = _resolveComponent(\"router-link\");\n    return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _cache[7] || (_cache[7] = _createElementVNode(\"img\", {\n            src: _imports_0,\n            alt: \"Logo\",\n            class: \"logo\"\n        }, null, -1)),\n        _cache[8] || (_cache[8] = _createElementVNode(\"h1\", null, \"Connexion\", -1)),\n        _createElementVNode(\"form\", {\n            onSubmit: _cache[2] || (_cache[2] = _withModifiers(\n            //@ts-ignore\n            (...args) => (_ctx.handleLogin && _ctx.handleLogin(...args)), [\"prevent\"]))\n        }, [\n            _createElementVNode(\"div\", _hoisted_2, [\n                _createVNode(_component_InputField, {\n                    type: \"email\",\n                    id: \"email\",\n                    modelValue: _ctx.form.email,\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_ctx.form.email) = $event)),\n                    label: \"Email\",\n                    \"error-message\": _ctx.emailError,\n                    placeholder: \"Entrez votre email\",\n                    required: \"\"\n                }, null, 8, [\"modelValue\", \"error-message\"]),\n                _createVNode(_component_InputField, {\n                    type: \"password\",\n                    id: \"password\",\n                    modelValue: _ctx.form.password,\n                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_ctx.form.password) = $event)),\n                    label: \"Mot de passe\",\n                    \"error-message\": _ctx.passwordError,\n                    placeholder: \"Entrez votre mot de passe\",\n                    required: \"\"\n                }, null, 8, [\"modelValue\", \"error-message\"])\n            ]),\n            _createVNode(_component_ButtonComponent, {\n                type: \"submit\",\n                class: \"btn-primary\",\n                disabled: _ctx.loading\n            }, {\n                default: _withCtx(() => [\n                    (_ctx.loading)\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                            _createTextVNode(\"Chargement...\")\n                        ], 64))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            _createTextVNode(\"Se connecter\")\n                        ], 64))\n                ]),\n                _: 1\n            }, 8, [\"disabled\"]),\n            (_ctx.apiError)\n                ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, _toDisplayString(_ctx.apiError), 1))\n                : _createCommentVNode(\"\", true)\n        ], 32),\n        _createElementVNode(\"p\", null, [\n            _createVNode(_component_router_link, { to: \"/requestPasswordReset\" }, {\n                default: _withCtx(() => _cache[3] || (_cache[3] = [\n                    _createTextVNode(\"Mot de passe oublié ?\")\n                ])),\n                _: 1\n            })\n        ]),\n        _createElementVNode(\"p\", null, [\n            _cache[5] || (_cache[5] = _createTextVNode(\" Vous n'avez pas de compte ? \")),\n            _createVNode(_component_router_link, { to: \"/register\" }, {\n                default: _withCtx(() => _cache[4] || (_cache[4] = [\n                    _createTextVNode(\"Inscrivez-vous ici\")\n                ])),\n                _: 1\n            }),\n            _cache[6] || (_cache[6] = _createTextVNode(\". \"))\n        ])\n    ]));\n}\n","import { defineComponent, ref, reactive } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { login } from '../../api/authService';\nimport ButtonComponent from '../../components/ButtonComponent.vue';\nimport InputField from '../../components/InputField.vue';\nexport default defineComponent({\n    name: \"Login\",\n    components: {\n        ButtonComponent,\n        InputField,\n    },\n    setup() {\n        const router = useRouter();\n        const form = reactive({\n            email: '',\n            password: ''\n        });\n        const emailError = ref(\"\");\n        const passwordError = ref(\"\");\n        const apiError = ref(\"\");\n        const loading = ref(false);\n        const handleLogin = async () => {\n            loading.value = true;\n            // Réinitialiser les erreurs\n            emailError.value = \"\";\n            passwordError.value = \"\";\n            apiError.value = \"\";\n            // Valider l'email\n            if (!validateEmail(form.email)) {\n                emailError.value = \"Veuillez entrer une adresse email valide.\";\n                loading.value = false;\n                return;\n            }\n            // Valider le mot de passe\n            if (form.password.length < 6) {\n                passwordError.value = \"Le mot de passe doit contenir au moins 6 caractères.\";\n                loading.value = false;\n                return;\n            }\n            try {\n                const response = await login(form);\n                console.log(\"valide \", response.message);\n                if (response.token) {\n                    localStorage.setItem('token', response.token);\n                    localStorage.setItem(\"username\", response.userInfo.username);\n                    console.log(\"login\", response.userInfo);\n                    if (response.userInfo.role === \"admin\") {\n                        router.push({\n                            path: \"/dashboardAdmin\",\n                            query: { username: response.userInfo.username },\n                        });\n                    }\n                    else if (response.userInfo.role === \"client\") {\n                        router.push(\"/dashboardClient\");\n                    }\n                    else if (response.userInfo.role === \"manager\") {\n                        router.push(\"/dashboardManager\");\n                    }\n                    else if (response.userInfo[0] === \"user\") {\n                        router.push(\"/dashboardUser\");\n                    }\n                    else {\n                        // Handle other cases or log an error as needed\n                        apiError.value = \"Role non reconnu.\";\n                        console.log(\"Role non reconnu.\");\n                    }\n                }\n            }\n            catch (error) {\n                console.error(error);\n                console.log(form);\n                if (typeof error === \"string\") {\n                    apiError.value = error;\n                    console.error(\"erreur type : \", error);\n                }\n                else {\n                    apiError.value = \"Email ou mot de passe incorrect.\";\n                    console.error(\"error\");\n                }\n            }\n            finally {\n                loading.value = false;\n            }\n        };\n        const validateEmail = (email) => {\n            const re = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n            return re.test(email);\n        };\n        return { form, emailError, passwordError, apiError, handleLogin, loading };\n    },\n});\n","import { render } from \"./Login.vue?vue&type=template&id=0746452a&ts=true\"\nimport script from \"./Login.vue?vue&type=script&lang=ts\"\nexport * from \"./Login.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\code dev\\\\projet\\\\V2\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode } from \"vue\";\nconst _hoisted_1 = { class: \"input-field\" };\nconst _hoisted_2 = [\"for\"];\nconst _hoisted_3 = [\"id\", \"type\", \"value\", \"placeholder\", \"disabled\", \"maxlength\", \"minlength\"];\nconst _hoisted_4 = {\n    key: 1,\n    class: \"error-message\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n    return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        (_ctx.label)\n            ? (_openBlock(), _createElementBlock(\"label\", {\n                key: 0,\n                for: _ctx.id,\n                class: \"input-label\"\n            }, _toDisplayString(_ctx.label), 9, _hoisted_2))\n            : _createCommentVNode(\"\", true),\n        _createElementVNode(\"input\", {\n            id: _ctx.id,\n            type: _ctx.type,\n            value: _ctx.modelValue,\n            placeholder: _ctx.placeholder,\n            disabled: _ctx.disabled,\n            maxlength: _ctx.maxlength,\n            minlength: _ctx.minlength,\n            onInput: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('update:modelValue', $event.target.value))),\n            class: \"input\"\n        }, null, 40, _hoisted_3),\n        (_ctx.errorMessage)\n            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, _toDisplayString(_ctx.errorMessage), 1))\n            : _createCommentVNode(\"\", true)\n    ]));\n}\n","import { defineComponent } from 'vue';\nexport default defineComponent({\n    name: 'InputField',\n    props: {\n        id: {\n            type: String,\n            required: true,\n        },\n        label: {\n            type: String,\n            required: true,\n        },\n        type: {\n            type: String,\n            default: 'text',\n        },\n        modelValue: {\n            type: String,\n            required: true,\n        },\n        placeholder: {\n            type: String,\n            required: true,\n        },\n        disabled: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        maxlength: {\n            type: Number,\n            required: false,\n        },\n        minlength: {\n            type: Number,\n            required: false,\n        },\n        errorMessage: {\n            type: String,\n            required: false,\n        },\n    },\n});\n","import { render } from \"./InputField.vue?vue&type=template&id=424e3b7f&scoped=true&ts=true\"\nimport script from \"./InputField.vue?vue&type=script&lang=ts\"\nexport * from \"./InputField.vue?vue&type=script&lang=ts\"\n\nimport \"./InputField.vue?vue&type=style&index=0&id=424e3b7f&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\code dev\\\\projet\\\\V2\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-424e3b7f\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./InputField.vue?vue&type=style&index=0&id=424e3b7f&scoped=true&lang=css\""],"sourceRoot":""}